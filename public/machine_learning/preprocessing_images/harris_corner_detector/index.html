<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Harris Corner Detector" />
<meta property="og:description" content="How to detect corners images using OpenCV in Python with the Harris Corner Detector." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chrisalbon.com/machine_learning/preprocessing_images/harris_corner_detector/" />



<meta property="article:published_time" content="2017-12-20T11:53:49-07:00"/>

<meta property="article:modified_time" content="2017-12-20T11:53:49-07:00"/>











<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Harris Corner Detector"/>
<meta name="twitter:description" content="How to detect corners images using OpenCV in Python with the Harris Corner Detector."/>
<meta name="generator" content="Hugo 0.31.1" />

    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Harris Corner Detector",
  "url": "https://chrisalbon.com/machine_learning/preprocessing_images/harris_corner_detector/",
  "wordCount": "156",
  "datePublished": "2017-12-20T11:53:49-07:00",
  "dateModified": "2017-12-20T11:53:49-07:00",
  "author": {
    "@type": "Person",
    "name": "Chris Albon"
  },
  "description": "How to detect corners images using OpenCV in Python with the Harris Corner Detector."
}
</script>



    <link rel="canonical" href="https://chrisalbon.com/machine_learning/preprocessing_images/harris_corner_detector/">

    <title>Harris Corner Detector | Chris Albon</title>

    <!-- combined, minified CSS -->
    <link href="https://chrisalbon.com/css/style.css" rel="stylesheet" integrity="" crossorigin="anonymous">
    <link href="https://chrisalbon.com/css/main.css" rel="stylesheet" integrity="" crossorigin="anonymous">

    

    

    <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

  </head>

  <body>

    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link" href="https://chrisalbon.com/">Home</a></nav>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-sm-12 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title"><a href="https://chrisalbon.com/machine_learning/preprocessing_images/harris_corner_detector/">Harris Corner Detector</a></h2>
    <p class="blog-post-meta"><time datetime="2017-12-20T11:53:49-07:00">Wed Dec 20, 2017</time></p>
  </header>
  

<p>The Harris Corner Detector is a commonly used method of detecting the intersection of two edges. It looks for windows (also called neighborhoods or patches) where small movements of the window (imagine shaking the window) creates big changes in the contents of the pixels inside the window.</p>

<h2 id="preliminaries">Preliminaries</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Load image</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">cv2</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">numpy</span> <span style="color:#080;font-weight:bold">as</span> <span style="color:#0e84b5;font-weight:bold">np</span>
<span style="color:#080;font-weight:bold">from</span> <span style="color:#0e84b5;font-weight:bold">matplotlib</span> <span style="color:#080;font-weight:bold">import</span> pyplot <span style="color:#080;font-weight:bold">as</span> plt</code></pre></div>
<h2 id="load-image">Load image</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Load image as grayscale</span>
image_bgr <span style="color:#333">=</span> cv2<span style="color:#333">.</span>imread(<span style="background-color:#fff0f0"></span><span style="background-color:#fff0f0">&#39;images/plane_256x256.jpg&#39;</span>)
image_gray <span style="color:#333">=</span> cv2<span style="color:#333">.</span>cvtColor(image_bgr, cv2<span style="color:#333">.</span>COLOR_BGR2GRAY)
image_gray <span style="color:#333">=</span> np<span style="color:#333">.</span>float32(image_gray)</code></pre></div>
<h2 id="define-corner-parameters">Define Corner Parameters</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Set corner detector parameters</span>
block_size <span style="color:#333">=</span> <span style="color:#00d;font-weight:bold">2</span>
aperture <span style="color:#333">=</span> <span style="color:#00d;font-weight:bold">29</span>
free_parameter <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">0.04</span></code></pre></div>
<h2 id="detect-corners">Detect Corners</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Detect corners</span>
detector_responses <span style="color:#333">=</span> cv2<span style="color:#333">.</span>cornerHarris(image_gray, block_size, aperture, free_parameter)</code></pre></div>
<h2 id="mark-corners">Mark Corners</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Large corner markers</span>
detector_responses <span style="color:#333">=</span> cv2<span style="color:#333">.</span>dilate(detector_responses, None)

<span style="color:#888"># Only keep detector responses greater than threshold, mark as white</span>
threshold <span style="color:#333">=</span> <span style="color:#60e;font-weight:bold">0.02</span>
image_bgr[detector_responses <span style="color:#333">&gt;</span> threshold <span style="color:#333">*</span> detector_responses<span style="color:#333">.</span><span style="color:#007020">max</span>()] <span style="color:#333">=</span> [<span style="color:#00d;font-weight:bold">255</span>,<span style="color:#00d;font-weight:bold">255</span>,<span style="color:#00d;font-weight:bold">255</span>]</code></pre></div>
<h2 id="view-image">View Image</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Convert to grayscale</span>
image_gray <span style="color:#333">=</span> cv2<span style="color:#333">.</span>cvtColor(image_bgr, cv2<span style="color:#333">.</span>COLOR_BGR2GRAY)

<span style="color:#888"># Show image</span>
plt<span style="color:#333">.</span>imshow(image_gray, cmap<span style="color:#333">=</span><span style="background-color:#fff0f0"></span><span style="background-color:#fff0f0">&#39;gray&#39;</span>), plt<span style="color:#333">.</span>axis(<span style="background-color:#fff0f0"></span><span style="background-color:#fff0f0">&#34;off&#34;</span>)
plt<span style="color:#333">.</span>show()</code></pre></div>
<p><img src="harris_corner_detector_13_0.png" alt="png" /></p>


</article> 



        </div> <!-- /.blog-main -->

      </div> <!-- /.row -->
    </div> <!-- /.container -->

    <footer class="blog-footer">
      <p>
      
      Blog template created by <a href="https://twitter.com/mdo">@mdo</a>, ported to Hugo by <a href='https://twitter.com/mralanorth'>@mralanorth</a>.
      
      </p>
    </footer>

  </body>

</html>
