<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta property="og:title" content="Geolocate A City Or Country" />
<meta property="og:description" content="Geolocate a city or country in Python." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chrisalbon.com/python/geolocate_a_city_or_country/" />



<meta property="article:published_time" content="2017-12-20T11:53:49-07:00"/>

<meta property="article:modified_time" content="2017-12-20T11:53:49-07:00"/>











<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Geolocate A City Or Country"/>
<meta name="twitter:description" content="Geolocate a city or country in Python."/>
<meta name="generator" content="Hugo 0.31.1" />

    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Geolocate A City Or Country",
  "url": "https://chrisalbon.com/python/geolocate_a_city_or_country/",
  "wordCount": "200",
  "datePublished": "2017-12-20T11:53:49-07:00",
  "dateModified": "2017-12-20T11:53:49-07:00",
  "author": {
    "@type": "Person",
    "name": "Chris Albon"
  },
  "keywords": "python, Other",
  "description": "Geolocate a city or country in Python."
}
</script>



    <link rel="canonical" href="https://chrisalbon.com/python/geolocate_a_city_or_country/">

    <title>Geolocate A City Or Country | Chris Albon</title>

    <!-- combined, minified CSS -->
    <link href="https://chrisalbon.com/css/style.css" rel="stylesheet" integrity="" crossorigin="anonymous">
    <link href="https://chrisalbon.com/css/main.css" rel="stylesheet" integrity="" crossorigin="anonymous">

    

    

    <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

  </head>

  <body>

    <div class="blog-masthead">
      <div class="container">
        <nav class="nav blog-nav">
          <a class="nav-link" href="https://chrisalbon.com/">Home</a></nav>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-sm-12 blog-main">

          


<article class="blog-post">
  <header>
    <h2 class="blog-post-title"><a href="https://chrisalbon.com/python/geolocate_a_city_or_country/">Geolocate A City Or Country</a></h2>
    <p class="blog-post-meta"><time datetime="2017-12-20T11:53:49-07:00">Wed Dec 20, 2017</time> in 
<i class="fa fa-folder" aria-hidden="true"></i>&nbsp;<a href="/categories/python" rel="category tag">python</a>


<i class="fa fa-tag" aria-hidden="true"></i>&nbsp;<a href="/tags/other" rel="tag">Other</a>

</p>
  </header>
  

<p>This tutorial creates a function that attempts to take a city and country and return its latitude and longitude. But when the city is unavailable (which is often be the case), the returns the latitude and longitude of the center of the country.</p>

<h2 id="preliminaries">Preliminaries</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-weight:bold">from</span> <span style="color:#0e84b5;font-weight:bold">geopy.geocoders</span> <span style="color:#080;font-weight:bold">import</span> Nominatim
geolocator <span style="color:#333">=</span> Nominatim()
<span style="color:#080;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">numpy</span> <span style="color:#080;font-weight:bold">as</span> <span style="color:#0e84b5;font-weight:bold">np</span></code></pre></div>
<h2 id="create-geolocation-function">Create Geolocation Function</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-weight:bold">def</span> <span style="color:#06b;font-weight:bold">geolocate</span>(city<span style="color:#333">=</span>None, country<span style="color:#333">=</span>None):
    <span style="background-color:#fff0f0"></span><span style="background-color:#fff0f0">&#39;&#39;&#39;
</span><span style="background-color:#fff0f0">    Inputs city and country, or just country. Returns the lat/long coordinates of 
</span><span style="background-color:#fff0f0">    either the city if possible, if not, then returns lat/long of the center of the country.
</span><span style="background-color:#fff0f0">    &#39;&#39;&#39;</span>
    
    <span style="color:#888"># If the city exists,</span>
    <span style="color:#080;font-weight:bold">if</span> city <span style="color:#333">!=</span> None:
        <span style="color:#888"># Try</span>
        <span style="color:#080;font-weight:bold">try</span>:
            <span style="color:#888"># To geolocate the city and country</span>
            loc <span style="color:#333">=</span> geolocator<span style="color:#333">.</span>geocode(<span style="color:#007020">str</span>(city <span style="color:#333">+</span> <span style="background-color:#fff0f0"></span><span style="background-color:#fff0f0">&#39;,&#39;</span> <span style="color:#333">+</span> country))
            <span style="color:#888"># And return latitude and longitude</span>
            <span style="color:#080;font-weight:bold">return</span> (loc<span style="color:#333">.</span>latitude, loc<span style="color:#333">.</span>longitude)
        <span style="color:#888"># Otherwise</span>
        <span style="color:#080;font-weight:bold">except</span>:
            <span style="color:#888"># Return missing value</span>
            <span style="color:#080;font-weight:bold">return</span> np<span style="color:#333">.</span>nan
    <span style="color:#888"># If the city doesn&#39;t exist</span>
    <span style="color:#080;font-weight:bold">else</span>:
        <span style="color:#888"># Try</span>
        <span style="color:#080;font-weight:bold">try</span>:
            <span style="color:#888"># Geolocate the center of the country</span>
            loc <span style="color:#333">=</span> geolocator<span style="color:#333">.</span>geocode(country)
            <span style="color:#888"># And return latitude and longitude </span>
            <span style="color:#080;font-weight:bold">return</span> (loc<span style="color:#333">.</span>latitude, loc<span style="color:#333">.</span>longitude)
        <span style="color:#888"># Otherwise</span>
        <span style="color:#080;font-weight:bold">except</span>:
            <span style="color:#888"># Return missing value</span>
            <span style="color:#080;font-weight:bold">return</span> np<span style="color:#333">.</span>nan</code></pre></div>
<h2 id="geolocate-a-city-and-country">Geolocate A City And Country</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Geolocate a city and country</span>
geolocate(city<span style="color:#333">=</span><span style="background-color:#fff0f0"></span><span style="background-color:#fff0f0">&#39;Austin&#39;</span>, country<span style="color:#333">=</span><span style="background-color:#fff0f0"></span><span style="background-color:#fff0f0">&#39;USA&#39;</span>)</code></pre></div>
<pre><code>(30.2711286, -97.7436994)
</code></pre>

<h2 id="geolocate-just-a-country">Geolocate Just A Country</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#888"># Geolocate just a country</span>
geolocate(country<span style="color:#333">=</span><span style="background-color:#fff0f0"></span><span style="background-color:#fff0f0">&#39;USA&#39;</span>)</code></pre></div>
<pre><code>(39.7837304, -100.4458824)
</code></pre>


</article> 



        </div> <!-- /.blog-main -->

      </div> <!-- /.row -->
    </div> <!-- /.container -->

    <footer class="blog-footer">
      <p>
      
      Blog template created by <a href="https://twitter.com/mdo">@mdo</a>, ported to Hugo by <a href='https://twitter.com/mralanorth'>@mralanorth</a>.
      
      </p>
    </footer>

  </body>

</html>
